# Computational Chemistry HPC Cluster Template
# Optimized for molecular dynamics and quantum chemistry
# Includes GROMACS, LAMMPS, Quantum ESPRESSO

cluster:
  name: chem-cluster
  region: us-east-1

compute:
  # Head node for job management
  head_node: t3.xlarge

  queues:
    # CPU queue for MD simulations
    - name: md
      instance_types:
        - c5.4xlarge
        - c5.9xlarge
        - c5.18xlarge
      min_count: 0
      max_count: 50

    # Memory-optimized queue for QM calculations
    - name: quantum
      instance_types:
        - r5.8xlarge
        - r5.12xlarge
        - r5.16xlarge
      min_count: 0
      max_count: 20

    # GPU queue for accelerated MD
    - name: gpu-md
      instance_types:
        - g4dn.2xlarge
        - g4dn.4xlarge
      min_count: 0
      max_count: 10

software:
  spack_packages:
    # Compilers and MPI
    - gcc@11.3.0
    - intel-oneapi-compilers@2023.1.0
    - openmpi@4.1.4
    - intel-oneapi-mpi@2021.9.0

    # Molecular dynamics packages
    - gromacs@2023.1
    - lammps@20230802
    - namd@2.14

    # Quantum chemistry
    - quantum-espresso@7.2
    - nwchem@7.2.0

    # Analysis tools
    - vmd@1.9.4
    - pymol@2.5.0

    # Scientific libraries
    - fftw@3.3.10
    - openblas@0.3.23
    - scalapack@2.2.0

    # Python and utilities
    - python@3.10
    - py-numpy@1.24.0
    - py-scipy@1.10.0
    - py-matplotlib@3.7.0
    - py-mdanalysis@2.5.0

    # CUDA for GPU acceleration
    - cuda@11.8.0

users:
  - name: chemuser1
    uid: 5001
    gid: 5001
  - name: chemuser2
    uid: 5002
    gid: 5002

data:
  s3_mounts:
    # Force fields and parameters
    - bucket: my-force-fields
      mount_point: /shared/forcefields

    # Simulation input files
    - bucket: my-simulation-inputs
      mount_point: /shared/inputs

    # Trajectory and results
    - bucket: my-simulation-results
      mount_point: /shared/results
